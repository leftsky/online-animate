import{a as V,b as j,c as B,d as P,_ as A}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Bnsa-2D0.js";import{_ as E}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DtC2VvC9.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-BgPnemTW.js";import{u as L}from"./useToast-zrdN7exZ.js";import{a as M,C as O}from"./copy-DgEB3pVI.js";import{d as Y,r as w,h as z,g as D,o as c,w as n,b as l,u as o,a as e,e as u,t as i,c as h,f as C}from"./app-Dynu5tc5.js";const F={class:"space-y-4"},U={class:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg"},q={class:"text-sm"},G={class:"text-sm"},H={class:"text-sm"},I={class:"text-sm"},J={class:"space-y-2"},K={class:"flex items-center justify-between"},Q={class:"relative"},R={class:"bg-muted p-4 rounded-lg text-sm overflow-auto max-h-96 border"},W={key:0,class:"absolute inset-0 flex items-center justify-center bg-muted/50 rounded-lg"},X={class:"text-center text-muted-foreground"},Z={key:0,class:"space-y-2"},ee={class:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg"},te=["src","alt"],se={class:"flex-1 min-w-0"},ae={class:"text-sm font-medium truncate"},oe={class:"text-xs text-muted-foreground"},ce=Y({__name:"SourceCodeViewer",setup(le,{expose:N}){const r=w(!1),s=w(null),{toast:d}=L(),S=z(()=>{var a;return(a=s.value)!=null&&a.animationScript?s.value.animationScript.split(`
`).map(t=>t.trimEnd()).join(`
`):""}),k=a=>a.split("/").pop()||a,$=async()=>{var a;if(!((a=s.value)!=null&&a.animationScript)){d.error("没有可复制的内容");return}try{await navigator.clipboard.writeText(s.value.animationScript),d.success("源码已复制到剪贴板")}catch(t){console.error("复制失败:",t),d.error("复制失败，请手动复制")}},T=a=>{s.value=a,r.value=!0},_=()=>{r.value=!1,s.value=null};return N({open:T,close:_}),(a,t)=>(c(),D(o(A),{open:r.value,"onUpdate:open":t[0]||(t[0]=m=>r.value=m)},{default:n(()=>[l(o(V),{class:"max-w-4xl max-h-[90vh]"},{default:n(()=>{var m,p,f,v,x,g;return[l(o(j),null,{default:n(()=>[l(o(B),null,{default:n(()=>{var b;return[u("源码查看 - "+i((b=s.value)==null?void 0:b.elementName),1)]}),_:1}),l(o(E),null,{default:n(()=>t[1]||(t[1]=[u(" 查看此分镜内容的YAML动画脚本 ",-1)])),_:1,__:[1]})]),_:1}),e("div",F,[e("div",U,[e("div",null,[t[2]||(t[2]=e("label",{class:"text-sm font-medium text-muted-foreground"},"内容名称",-1)),e("p",q,i((m=s.value)==null?void 0:m.elementName),1)]),e("div",null,[t[3]||(t[3]=e("label",{class:"text-sm font-medium text-muted-foreground"},"元素类型",-1)),e("p",G,i((p=s.value)==null?void 0:p.elementType),1)]),e("div",null,[t[4]||(t[4]=e("label",{class:"text-sm font-medium text-muted-foreground"},"图层顺序",-1)),e("p",H,i((f=s.value)==null?void 0:f.layerOrder),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-muted-foreground"},"持续时间",-1)),e("p",I,i((v=s.value)==null?void 0:v.duration),1)])]),e("div",J,[e("div",K,[t[7]||(t[7]=e("label",{class:"text-sm font-medium"},"YAML动画脚本",-1)),l(o(y),{variant:"outline",size:"sm",onClick:$,class:"h-8"},{default:n(()=>[l(o(M),{class:"w-4 h-4 mr-1"}),t[6]||(t[6]=u(" 复制 ",-1))]),_:1,__:[6]})]),e("div",Q,[e("pre",R,[e("code",null,i(S.value),1)]),(x=s.value)!=null&&x.animationScript?C("",!0):(c(),h("div",W,[e("div",X,[l(o(O),{class:"w-8 h-8 mx-auto mb-2"}),t[8]||(t[8]=e("p",{class:"text-sm"},"暂无动画脚本",-1))])]))])]),(g=s.value)!=null&&g.imagePath?(c(),h("div",Z,[t[9]||(t[9]=e("label",{class:"text-sm font-medium"},"图片资源",-1)),e("div",ee,[e("img",{src:s.value.imagePath,alt:s.value.elementName,class:"w-12 h-12 rounded object-cover"},null,8,te),e("div",se,[e("p",ae,i(k(s.value.imagePath)),1),e("p",oe,i(s.value.imagePath),1)])])])):C("",!0)]),l(o(P),null,{default:n(()=>[l(o(y),{variant:"outline",onClick:_},{default:n(()=>t[10]||(t[10]=[u("关闭",-1)])),_:1,__:[10]})]),_:1})]}),_:1})]),_:1},8,["open"]))}});export{ce as _};
