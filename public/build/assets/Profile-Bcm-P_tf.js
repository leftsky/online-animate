import{d as c,g as w,o as u,u as e,G as V,H as k,w as a,E as S,r as E,D as B,c as v,b as s,a as r,e as n,y as D,i as N,v as U,f as x,A as P}from"./app-Dynu5tc5.js";import{a as C,_ as h}from"./Layout.vue_vue_type_script_setup_true_lang-Dw0LAthW.js";import{_ as y}from"./InputError.vue_vue_type_script_setup_true_lang-ESs9Egpa.js";import{X as q,o as F,_}from"./Button.vue_vue_type_script_setup_true_lang-BgPnemTW.js";import{a as I,b as M,c as T,d as X,_ as z}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Bnsa-2D0.js";import{_ as A}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DtC2VvC9.js";import{a as b,_ as $}from"./Label.vue_vue_type_script_setup_true_lang-BZ8aVwwL.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CmafWrlK.js";import{S as H}from"./transition-oGcBdfNP.js";import"./x-BE0BvSeC.js";import"./createLucideIcon-CZW-bvdG.js";import"./index-CUUO6Z42.js";import"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang-BagbxIyi.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-mndLukLN.js";import"./settings-C2RLwdqr.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C9_ic-40.js";const R=c({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(p){const d=p;return(l,m)=>(u(),w(e(q),V(k(d)),{default:a(()=>[S(l.$slots,"default")]),_:3},16))}}),j=c({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(p){const d=p;return(l,m)=>(u(),w(e(F),V(k(d)),{default:a(()=>[S(l.$slots,"default")]),_:3},16))}}),J={class:"space-y-6"},K={class:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10"},L={class:"grid gap-2"},O=c({__name:"DeleteUser",setup(p){const d=E(null),l=B({password:""}),m=f=>{f.preventDefault(),l.delete(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>i(),onError:()=>{var t;return(t=d.value)==null?void 0:t.focus()},onFinish:()=>l.reset()})},i=()=>{l.clearErrors(),l.reset()};return(f,t)=>(u(),v("div",J,[s(C,{title:"删除账户",description:"删除您的账户及其所有资源"}),r("div",K,[t[7]||(t[7]=r("div",{class:"relative space-y-0.5 text-red-600 dark:text-red-100"},[r("p",{class:"font-medium"},"警告"),r("p",{class:"text-sm"},"请谨慎操作，此操作无法撤销。")],-1)),s(e(z),null,{default:a(()=>[s(e(j),{"as-child":""},{default:a(()=>[s(e(_),{variant:"destructive"},{default:a(()=>t[1]||(t[1]=[n("删除账户",-1)])),_:1,__:[1]})]),_:1}),s(e(I),null,{default:a(()=>[r("form",{class:"space-y-6",onSubmit:m},[s(e(M),{class:"space-y-3"},{default:a(()=>[s(e(T),null,{default:a(()=>t[2]||(t[2]=[n("您确定要删除您的账户吗？",-1)])),_:1,__:[2]}),s(e(A),null,{default:a(()=>t[3]||(t[3]=[n(" 一旦您的账户被删除，其所有资源和数据将被永久删除。请输入您的密码以确认您要永久删除您的账户。 ",-1)])),_:1,__:[3]})]),_:1}),r("div",L,[s(e(b),{for:"password",class:"sr-only"},{default:a(()=>t[4]||(t[4]=[n("密码",-1)])),_:1,__:[4]}),s(e($),{id:"password",type:"password",name:"password",ref_key:"passwordInput",ref:d,modelValue:e(l).password,"onUpdate:modelValue":t[0]||(t[0]=o=>e(l).password=o),placeholder:"密码"},null,8,["modelValue"]),s(y,{message:e(l).errors.password},null,8,["message"])]),s(e(X),null,{default:a(()=>[s(e(R),{"as-child":""},{default:a(()=>[s(e(_),{variant:"secondary",onClick:i},{default:a(()=>t[5]||(t[5]=[n(" 取消 ",-1)])),_:1,__:[5]})]),_:1}),s(e(_),{variant:"destructive",disabled:e(l).processing},{default:a(()=>t[6]||(t[6]=[r("button",{type:"submit"},"删除账户",-1)])),_:1,__:[6]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1})])]))}}),Q={class:"flex flex-col space-y-6"},W={class:"grid gap-2"},Y={class:"grid gap-2"},Z={key:0},ee={class:"mt-2 text-sm text-neutral-800"},se={key:0,class:"mt-2 text-sm font-medium text-green-600"},te={class:"flex items-center gap-4"},be=c({__name:"Profile",props:{mustVerifyEmail:{type:Boolean},status:{},className:{}},setup(p){const d=[{title:"个人资料设置",href:"/settings/profile"}],m=D().props.auth.user,i=B({name:m.name,email:m.email}),f=()=>{i.patch(route("profile.update"),{preserveScroll:!0})};return(t,o)=>(u(),w(G,{breadcrumbs:d},{default:a(()=>[s(e(N),{title:"个人资料设置"}),s(h,null,{default:a(()=>[r("div",Q,[s(C,{title:"个人资料信息",description:"更新您的姓名和邮箱地址"}),r("form",{onSubmit:U(f,["prevent"]),class:"space-y-6"},[r("div",W,[s(e(b),{for:"name"},{default:a(()=>o[2]||(o[2]=[n("姓名",-1)])),_:1,__:[2]}),s(e($),{id:"name",class:"mt-1 block w-full",modelValue:e(i).name,"onUpdate:modelValue":o[0]||(o[0]=g=>e(i).name=g),required:"",autocomplete:"name",placeholder:"请输入姓名"},null,8,["modelValue"]),s(y,{class:"mt-2",message:e(i).errors.name},null,8,["message"])]),r("div",Y,[s(e(b),{for:"email"},{default:a(()=>o[3]||(o[3]=[n("邮箱地址",-1)])),_:1,__:[3]}),s(e($),{id:"email",type:"email",class:"mt-1 block w-full",modelValue:e(i).email,"onUpdate:modelValue":o[1]||(o[1]=g=>e(i).email=g),required:"",autocomplete:"username",placeholder:"请输入邮箱地址"},null,8,["modelValue"]),s(y,{class:"mt-2",message:e(i).errors.email},null,8,["message"])]),t.mustVerifyEmail&&!e(m).email_verified_at?(u(),v("div",Z,[r("p",ee,[o[5]||(o[5]=n(" 您的邮箱地址尚未验证。 ",-1)),s(e(P),{href:t.route("verification.send"),method:"post",as:"button",class:"focus:outline-hidden rounded-md text-sm text-neutral-600 underline hover:text-neutral-900 focus:ring-2 focus:ring-offset-2"},{default:a(()=>o[4]||(o[4]=[n(" 点击此处重新发送验证邮件。 ",-1)])),_:1,__:[4]},8,["href"])]),t.status==="verification-link-sent"?(u(),v("div",se," 新的验证链接已发送到您的邮箱地址。 ")):x("",!0)])):x("",!0),r("div",te,[s(e(_),{disabled:e(i).processing},{default:a(()=>o[6]||(o[6]=[n("保存",-1)])),_:1,__:[6]},8,["disabled"]),s(e(H),{show:e(i).recentlySuccessful,enter:"transition ease-in-out","enter-from":"opacity-0",leave:"transition ease-in-out","leave-to":"opacity-0"},{default:a(()=>o[7]||(o[7]=[r("p",{class:"text-sm text-neutral-600"},"已保存。",-1)])),_:1,__:[7]},8,["show"])])],32)]),s(O)]),_:1})]),_:1}))}});export{be as default};
