import{d as L,r as f,h as Q,c as m,o as n,n as N,a,f as E,b as t,u as e,O as U,Y as H,a3 as P,t as p,v as S,g as I,w as r,e as c,F as R,j as W,Q as X}from"./app-Dynu5tc5.js";import{d as ee,_ as te,a as se,c as h,b as ie}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-mndLukLN.js";import{_ as v}from"./Button.vue_vue_type_script_setup_true_lang-BgPnemTW.js";import{_ as ae}from"./ImagePreview.vue_vue_type_script_setup_true_lang-BJUQUqsH.js";import{A as oe}from"./AnimationParser-DYUHDxlX.js";import{G as re,E as ne,a as le}from"./grip-vertical-0wdWM_Gj.js";import{I as me}from"./image-DckTtAF3.js";import{C as de,E as ce}from"./ellipsis-vertical-Bj-pqAIa.js";import{C as V,a as ue}from"./copy-DgEB3pVI.js";import{Z as w,S as fe}from"./zap-D2Tn7i4y.js";import{T as $,P as pe}from"./trash-2-CYySEXdi.js";import{P as ve}from"./play-0jxsF_Wc.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Bnsa-2D0.js";import"./x-BE0BvSeC.js";import"./createLucideIcon-CZW-bvdG.js";const _e={class:"drag-handle cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground"},he=["src","alt"],be={key:1,class:"w-full h-full flex items-center justify-center"},we={class:"flex-1 min-w-0"},xe=["title"],ye={class:"text-xs text-muted-foreground mt-1"},ke=["title"],Ce=["title"],Ae={class:"p-1 text-muted-foreground hover:text-foreground transition-colors"},Ne={key:0,class:"border-t border-border bg-muted/20 p-4 space-y-3"},Ee={class:"space-y-2"},Pe={class:"flex items-center justify-between"},Se={class:"space-y-1"},Ie={class:"flex items-center gap-2"},Ve={class:"font-medium"},$e={class:"text-muted-foreground"},ze={class:"flex items-center gap-1"},Te={key:0,class:"text-center py-4 text-muted-foreground"},je={class:"flex items-center gap-2 pt-2 border-t border-border"},Be=L({__name:"StoryboardItem",props:{item:{}},emits:["updateName","toggleVisibility","viewSource","manageAnimations","duplicate","delete","previewAnimation"],setup(z,{emit:T}){const o=z,l=T,g=f(!1),d=f(""),b=f(),x=f(),u=f(!1),y=Q(()=>{if(!o.item.animationScript)return[];try{return oe.parseYamlToJson(o.item.animationScript).animationSequences||[]}catch{return[]}}),j=()=>{g.value=!0,d.value=o.item.elementName,X(()=>{var i,s;(i=b.value)==null||i.focus(),(s=b.value)==null||s.select()})},k=()=>{d.value.trim()&&d.value!==o.item.elementName&&l("updateName",o.item.id,d.value.trim()),g.value=!1},B=()=>{g.value=!1,d.value=o.item.elementName},D=()=>{l("toggleVisibility",o.item.id)},O=()=>{var i;o.item.imagePath&&((i=x.value)==null||i.open())},C=()=>{l("viewSource",o.item)},q=()=>{l("manageAnimations",o.item)},F=()=>{l("duplicate",o.item)},G=()=>{l("delete",o.item.id)},A=()=>{u.value=!u.value},K=()=>{l("manageAnimations",o.item)},M=()=>{l("manageAnimations",o.item)},Y=()=>{l("manageAnimations",o.item)},Z=()=>{l("previewAnimation",o.item)};return(i,s)=>(n(),m("div",{class:N(["group relative bg-card rounded-lg border border-border hover:bg-accent/50 transition-colors",{"opacity-50":!i.item.visible}])},[a("div",{class:"flex items-center gap-3 p-3 cursor-pointer",onClick:A},[a("div",_e,[t(e(re),{class:"w-4 h-4"})]),a("div",{class:"relative w-16 h-16 rounded-md overflow-hidden bg-muted cursor-pointer hover:ring-2 hover:ring-primary/50 transition-all",onClick:O},[i.item.imagePath?(n(),m("img",{key:0,src:i.item.imagePath,alt:i.item.elementName,class:"w-full h-full object-cover"},null,8,he)):(n(),m("div",be,[t(e(me),{class:"w-6 h-6 text-muted-foreground"})]))]),a("div",we,[g.value?U((n(),m("input",{key:0,ref_key:"nameInput",ref:b,"onUpdate:modelValue":s[0]||(s[0]=_=>d.value=_),type:"text",class:"w-full px-2 py-1 text-sm bg-background border border-input rounded focus:outline-none focus:ring-2 focus:ring-ring",onKeydown:[P(k,["enter"]),P(B,["esc"])],onBlur:k},null,544)),[[H,d.value]]):(n(),m("div",{key:1,class:"text-sm font-medium truncate cursor-pointer hover:text-primary transition-colors",onClick:j,title:i.item.elementName},p(i.item.elementName),9,xe)),a("div",ye," 图层 "+p(i.item.layerOrder)+" • "+p(i.item.duration),1)]),a("button",{class:"p-1 text-muted-foreground hover:text-foreground transition-colors",onClick:S(D,["stop"]),title:i.item.visible?"隐藏":"显示"},[i.item.visible?(n(),I(e(ne),{key:0,class:"w-4 h-4"})):(n(),I(e(le),{key:1,class:"w-4 h-4"}))],8,ke),a("button",{class:"p-1 text-muted-foreground hover:text-foreground transition-all duration-200",onClick:S(A,["stop"]),title:u.value?"收起":"展开"},[t(e(de),{class:N(["w-4 h-4 transition-transform duration-200",{"rotate-180":u.value}])},null,8,["class"])],8,Ce),t(e(ee),null,{default:r(()=>[t(e(te),{"as-child":""},{default:r(()=>[a("button",Ae,[t(e(ce),{class:"w-4 h-4"})])]),_:1}),t(e(se),{align:"end",class:"w-48"},{default:r(()=>[t(e(h),{onClick:C},{default:r(()=>[t(e(V),{class:"w-4 h-4 mr-2"}),s[1]||(s[1]=c(" 查看源码 ",-1))]),_:1,__:[1]}),t(e(h),{onClick:q},{default:r(()=>[t(e(w),{class:"w-4 h-4 mr-2"}),s[2]||(s[2]=c(" 管理动画 ",-1))]),_:1,__:[2]}),t(e(ie)),t(e(h),{onClick:F},{default:r(()=>[t(e(ue),{class:"w-4 h-4 mr-2"}),s[3]||(s[3]=c(" 复制 ",-1))]),_:1,__:[3]}),t(e(h),{onClick:G,class:"text-destructive"},{default:r(()=>[t(e($),{class:"w-4 h-4 mr-2"}),s[4]||(s[4]=c(" 删除 ",-1))]),_:1,__:[4]})]),_:1})]),_:1})]),u.value?(n(),m("div",Ne,[a("div",Ee,[a("div",Pe,[s[6]||(s[6]=a("h4",{class:"text-sm font-medium"},"动画效果",-1)),t(e(v),{variant:"outline",size:"sm",onClick:K,class:"h-7 text-xs"},{default:r(()=>[t(e(pe),{class:"w-3 h-3 mr-1"}),s[5]||(s[5]=c(" 添加动画 ",-1))]),_:1,__:[5]})]),a("div",Se,[(n(!0),m(R,null,W(y.value,(_,J)=>(n(),m("div",{key:J,class:"flex items-center justify-between p-2 bg-background rounded border text-xs"},[a("div",Ie,[t(e(w),{class:"w-3 h-3 text-primary"}),a("span",Ve,p(_.name),1),a("span",$e,p(_.duration),1)]),a("div",ze,[t(e(v),{variant:"ghost",size:"sm",onClick:M,class:"h-6 w-6 p-0"},{default:r(()=>[t(e(fe),{class:"w-3 h-3"})]),_:1}),t(e(v),{variant:"ghost",size:"sm",onClick:Y,class:"h-6 w-6 p-0 text-destructive hover:text-destructive"},{default:r(()=>[t(e($),{class:"w-3 h-3"})]),_:1})])]))),128)),y.value.length===0?(n(),m("div",Te,[t(e(w),{class:"w-6 h-6 mx-auto mb-1"}),s[7]||(s[7]=a("p",{class:"text-xs"},"还没有添加动画效果",-1))])):E("",!0)])]),a("div",je,[t(e(v),{variant:"outline",size:"sm",onClick:C,class:"h-7 text-xs hover:bg-gray-50 transition-colors"},{default:r(()=>[t(e(V),{class:"w-3 h-3 mr-1"}),s[8]||(s[8]=c(" 查看源码 ",-1))]),_:1,__:[8]}),t(e(v),{variant:"outline",size:"sm",onClick:Z,class:"h-7 text-xs bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:border-blue-300 transition-all duration-200 transform hover:scale-105 active:scale-95"},{default:r(()=>[t(e(ve),{class:"w-3 h-3 mr-1 animate-pulse"}),s[9]||(s[9]=a("span",{class:"font-medium"},"预览动画",-1))]),_:1,__:[9]})])])):E("",!0),t(ae,{ref_key:"imagePreview",ref:x,src:i.item.imagePath,alt:i.item.elementName},null,8,["src","alt"])],2))}}),Xe=ge(Be,[["__scopeId","data-v-45cb117d"]]);export{Xe as default};
